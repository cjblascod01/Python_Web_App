<!DOCTYPE html>
<html lang="es">
   <head>
      <meta charset="UTF-8">
      <title>Gestión de Usuarios</title>
      <link rel="stylesheet" href="./static/styles.css">
   </head>
   <body>
      <main>
          <h1>Gestión de Usuarios</h1>
          {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
          <ul class="flash-messages">
              {% for category, message in messages %}
              <li class="{{ category }}">{{ message }}</li>
              {% endfor %}
          </ul>
          {% endif %}
          {% endwith %}
          <script>
              setTimeout(() => {
                const flashMessages = document.querySelector('.flash-messages');
                if (flashMessages) {
                    flashMessages.style.display = 'none';
                }
            }, 5000); // Oculta los mensajes después de 5 segundos
          </script>
      </main>
      <div class="container">
         <section>
            <h2>Crear Usuario</h2><br>
            <form action="/listaUsuarios/crear-usuario" method="post">
               <div class="form-group">
                   <label for="mailUsuario">Email del usuario</label>
                   <input type="email" name="mailUsuario" placeholder="Email" id="mailUsuario" class="form-control" required/>
               </div>
                <div class="form-group">
                    <label for="usuario">Usuario</label>
                    <input type="text" name="usuario" placeholder="Usuario" id="usuario" class="form-control" required/>
                </div>
                <div class="form-group">
                    <label for="contrasena">Contraseña</label>
                    <input type="password" name="contrasena" placeholder="Contraseña" id="contrasena" class="form-control" required/>
                </div>
                <div class="form-group">
                    <label for="nombreCompletoUsuario">Nombre completo del usuario</label>
                    <input type="text" name="nombreCompletoUsuario" placeholder="Nombre completo" id="nombreCompletoUsuario" class="form-control" required/>
                </div>
                <div class="form-group">
                    <label for="dni">DNI del usuario</label>
                    <input type="text" name="dni" placeholder="DNI" id="dni" class="form-control" required/>
                </div>
                <div class="form-group">
                    <label for="acceso">Tipo de acceso</label>
                    <select name="acceso" id="acceso" class="form-control" required>
                        <option value="admin">Administrador</option>
                        <option value="user">Usuario común</option>
                    </select>
                </div>
               <button type="submit">Registrar</button>
            </form>
         </section>
         <section>
            <h2>Lista de usuarios existentes</h2>
            <div class="card-container">
               {% for usuario in lista_de_usuarios %}
               <div class="card">
                  <h3>{{ usuario.usuario }}</h3>
                  <p>
                      <strong>Nombre completo:</strong> {{ usuario.nombreCompletoUsuario }}<br>
                      <strong>Correo electrónico:</strong> {{ usuario.mailUsuario }}<br>
                      <strong>Tipo de acceso:</strong> {{ usuario.acceso }}<br>
                  </p>
                  <div class="btn-group">
                        <a href="/editar-usuario/{{ usuario.usuario }}" class="edit">Editar</a>
                        <a href="/listaUsuarios/borrar-usuario/{{ usuario.usuario }}" class="delete">Borrar</a>
                  </div>
               </div>
               {% endfor %}
            </div>
         </section>
         <footer>
            <a href="/session" class="link-back">Volver</a>
         </footer>
      </div>
   </body>
</html>