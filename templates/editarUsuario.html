<!DOCTYPE html>
<html lang="es">
   <head>
      <meta charset="UTF-8">
      <title>Gestión de Usuarios</title>
      <link rel="stylesheet" href="./../../static/styles.css">
   </head>
   <body>
      <main>
        <h1>Gestión de Usuarios</h1>
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <ul class="flash-messages">
            {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        <script>
            setTimeout(() => {
                const flashMessages = document.querySelector('.flash-messages');
                if (flashMessages) {
                    flashMessages.style.display = 'none';
                }
            }, 5000); // Oculta los mensajes después de 5 segundos
        </script>
      </main>
      <div class="container">
          <section>
              <h2>Editar Usuario</h2><br>
              <form action="/editar-usuario/{{usuario.usuario}}" method="post">
               <div class="form-group">
                   <label for="mailUsuario">Email del usuario</label>
                   <input type="email" name="mailUsuario" placeholder="Email" id="mailUsuario" class="form-control"/>
               </div>
                <div class="form-group">
                    <label for="usuario">Usuario</label>
                    <input type="text" name="usuario" placeholder="Usuario" id="usuario" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="contrasena">Contraseña</label>
                    <input type="password" name="contrasena" placeholder="Contraseña" id="contrasena" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="nombreCompletoUsuario">Nombre completo del usuario</label>
                    <input type="text" name="nombreCompletoUsuario" placeholder="Nombre completo" id="nombreCompletoUsuario" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="dni">DNI del usuario</label>
                    <input type="text" name="dni" placeholder="DNI" id="dni" class="form-control"/>
                </div>
                {% if session['acceso'] == 'admin': %}
                <div class="form-group">
                    <label for="acceso">Tipo de acceso</label>
                    <select name="acceso" id="acceso" class="form-control">
                        <option value="admin">Administrador</option>
                        <option value="user">Usuario común</option>
                    </select>
                </div>
                {% endif %}
               <button type="submit">Actualizar</button>
            </form>
          </section>
          <section>
              <div class="card-container">
                  <div class="card">
                      <h3>{{ usuario.usuario }}</h3>
                      <p>
                          <strong>Nombre completo:</strong> {{ usuario.nombreCompletoUsuario }}<br>
                          <strong>Correo electrónico:</strong> {{ usuario.mailUsuario }}<br>
                          {% if session['acceso'] == 'admin': %}
                          <strong>Tipo de acceso:</strong> {{ usuario.acceso }}
                          {% endif %}
                      </p>
                  </div>
              </div>
          </section>
          <footer>
              {% if session['acceso'] == 'admin' %}
              <a href="/listaUsuarios" class="link-back">Volver</a>
              {% else %}
              <a href="/session" class="link-back">Volver</a>
              {% endif %}
         </footer>
      </div>
   </body>
</html>